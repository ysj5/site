<!DOCTYPE html>
<html>
  <head>
    <title>个人网站</title>
    <meta charset="utf-8" />
    <meta name="description" content="A Quasar Project" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta
      name="viewport"
      content="user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1,width=device-width"
    />
    <link rel=icon type=image/png sizes=128x128
    href="./icons/favicon-128x128.png"> <link rel=icon type=image/png sizes=96x96
    href="./icons/favicon-96x96.png"> <link rel=icon type=image/png sizes=32x32
    href="./icons/favicon-32x32.png"> <link rel=icon type=image/png sizes=16x16
    href="./icons/favicon-16x16.png"> <link rel=icon type=image/ico
    href="./favicon.ico">
    <link rel="stylesheet" href="./assets/css/index.css" />
  </head>

  <body>
    <main class="container">
      <div class="rule">
        <section class="gua">
          <div class="row">
            <div class="col">2.留连-木</div>
            <div class="col">3.速喜-火</div>
            <div class="col">7.病符-土</div>
          </div>
          <div class="row">
            <div class="col">1.大安-木</div>
            <div class="col">6.空亡-土</div>
            <div class="col">4.赤口-金</div>
          </div>
          <div class="row">
            <div class="col">8.桃花-土</div>
            <div class="col">5.小吉-水</div>
            <div class="col">9.天德-金</div>
          </div>
        </section>
        <section class="time">
          <p>子时23～1点</p>
          <p>丑时1～3点</p>
          <p>寅时3～5点</p>
          <p>卯时5～7点</p>
          <p>辰时7～9点</p>
          <p>巳时9～11点</p>
          <p>午时11～13点</p>
          <p>未时13～15点</p>
          <p>申时15～17点</p>
          <p>酉时17～19点</p>
          <p>戌时19～21点</p>
          <p>亥时21～23点</p>
          <div class="calc">
            <input type="text" placeholder="输入三个数计算（空格分割）" class="calcInput">
            <button class="calcBtn">计算</button>
          </div>
        </section>
        <section class="explain">
          <!-- <div class="item">
            <aside class="up"></aside>
            <aside class="down">
              <div class="left"></div>
              <div class="right">
                <div class="five"></div>
                <div class="sketch"></div>
                <div class="god"></div>
                <p class="des"></p>
              </div>
            </aside>
          </div> -->
        </section>
      </div>
    </main>

    <script>
      const explainEl = document.querySelector(".explain");
      fetch("./assets/data.json")
        .then((response) => response.json())
        .then((data) => {
          const fragment = document.createDocumentFragment();
          data.forEach((item) => {
            const itemEl = document.createElement("div");
            itemEl.classList.add("item");
            itemEl.innerHTML = `
              <aside class="up">${item.name}</aside>
              <aside class="down">
                <div class="left">${item.generalize}</div>
                <div class="right">
                  <div class="five">${item.fiveXing}</div>
                  <div class="sketch">${item.sketch}</div>
                  <div class="god">${item.god}</div>
                  <p class="des">${item.explain}</p>
                </div>
              </aside>
            `;
            fragment.appendChild(itemEl);
          });
          explainEl.appendChild(fragment);
        });

      const calcBtn = document.querySelector(".calcBtn");
      const calcInput = document.querySelector(".calcInput");
      const arr = [
        '大安（木）',
        '留连（木）',
        '速喜（火）',
        '赤口（金）',
        '小吉（水）',
        '空亡（土）',
        '病符（土）',
        '桃花（土）',
        '天德（金）',
      ]
      function calc() {
        const nums = calcInput.value.split(" ").map(Number);
        if(nums.length !== 3) {
          alert("请输入三个数字！");
          return;
        }
        const len = arr.length;
        const firstIndex = nums[0] % len - 1;
        const firstChar = arr[firstIndex];
        const secondIndex = (firstIndex + nums[1] % len) % len - 1;
        const secondChar = arr[secondIndex];
        console.log(secondIndex, secondChar)
        const thirdIndex = (secondIndex + nums[2] % len) % len - 1;
        const thirdChar = arr[thirdIndex];
        const result = `${firstChar} -> ${secondChar} -> ${thirdChar}`;
        const divEl = document.querySelector('.result') || document.createElement("div");
        divEl.classList.add("result");
        divEl.textContent = result;
        calcBtn.after(divEl);
      }
      calcBtn.addEventListener("click", () => {
        calc();
      });
      calcInput.addEventListener('keydown', (e) => {
        if(e.key === 'Enter' || e.keyCode === 13) {
          calc();
        }
      })
    </script>
  </body>
</html>
